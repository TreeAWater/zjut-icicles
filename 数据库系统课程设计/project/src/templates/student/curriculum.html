{% extends "base.html" %}

{% block title %}专业培养计划 - 教务管理系统{% endblock %}

{% block head_extra %}
<style>
    .curriculum-container {
        max-width: 1000px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }
    
    .curriculum-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .curriculum-title {
        font-size: 1.5em;
        font-weight: 500;
    }
    
    .major-info {
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    
    .major-info h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.2em;
    }
    
    .major-info p {
        margin: 5px 0;
    }
    
    .major-info strong {
        font-weight: 500;
    }
    
    .semester-tabs {
        display: flex;
        border-bottom: 1px solid #ddd;
        margin-bottom: 20px;
        overflow-x: auto;
    }
    
    .semester-tab {
        padding: 10px 15px;
        cursor: pointer;
        border: 1px solid transparent;
        border-bottom: none;
        margin-right: 5px;
        white-space: nowrap;
    }
    
    .semester-tab.active {
        background-color: #fff;
        border-color: #ddd;
        border-radius: 5px 5px 0 0;
        font-weight: 500;
    }
    
    .semester-content {
        display: none;
    }
    
    .semester-content.active {
        display: block;
    }
    
    .course-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        transition: box-shadow 0.2s;
    }
    
    .course-card:hover {
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    .course-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    
    .course-title {
        font-weight: 500;
        font-size: 1.1em;
    }
    
    .course-code {
        color: #666;
    }
    
    .course-details {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 10px;
    }
    
    .course-detail {
        display: flex;
        align-items: center;
    }
    
    .detail-label {
        color: #666;
        margin-right: 5px;
    }
    
    .course-description {
        color: #555;
        margin-top: 10px;
        font-size: 0.95em;
        line-height: 1.4;
    }
    
    .course-status {
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
    }
    
    .status-required {
        background-color: #e8f4ff;
        color: #0056b3;
    }
    
    .status-elective {
        background-color: #e8f8e8;
        color: #28a745;
    }
    
    .status-general {
        background-color: #fff3cd;
        color: #856404;
    }
    
    .status-completed {
        background-color: #d4edda;
        color: #155724;
    }
    
    .status-in-progress {
        background-color: #fff3cd;
        color: #856404;
    }
    
    .status-planned {
        background-color: #f8f9fa;
        color: #6c757d;
    }
    
    .prerequisite-list {
        margin-top: 10px;
    }
    
    .prerequisite-item {
        font-size: 0.9em;
        color: #666;
    }
</style>
{% endblock %}

{% block content %}
<div class="curriculum-container">
    <div class="curriculum-header">
        <div class="curriculum-title">专业培养计划</div>
    </div>
    
    <div class="major-info">
        <h3 id="major-name">计算机科学与技术</h3>
        <p><strong>学院：</strong><span id="department">计算机科学与工程学院</span></p>
        <p><strong>学制：</strong><span id="duration">4年</span></p>
        <p><strong>学位：</strong><span id="degree">工学学士</span></p>
        <p><strong>毕业要求学分：</strong><span id="required-credits">160</span></p>
        <p><strong>专业负责人：</strong><span id="coordinator">张教授</span></p>
    </div>
    
    <div class="semester-tabs" id="semester-tabs">
        <div class="semester-tab active" data-semester="1">第一学期</div>
        <div class="semester-tab" data-semester="2">第二学期</div>
        <div class="semester-tab" data-semester="3">第三学期</div>
        <div class="semester-tab" data-semester="4">第四学期</div>
        <div class="semester-tab" data-semester="5">第五学期</div>
        <div class="semester-tab" data-semester="6">第六学期</div>
        <div class="semester-tab" data-semester="7">第七学期</div>
        <div class="semester-tab" data-semester="8">第八学期</div>
    </div>
    
    <div id="semester-contents">
        <!-- 学期内容将通过JavaScript动态加载 -->
    </div>
</div>

{% endblock %}

{% block scripts_extra %}
<script>
    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
        initSemesterTabs();
        loadSemesterCourses(1); // 默认加载第一学期
    });
    
    // 初始化学期标签页
    function initSemesterTabs() {
        const tabs = document.querySelectorAll('.semester-tab');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // 移除所有活动标签
                tabs.forEach(t => t.classList.remove('active'));
                
                // 设置当前标签为活动
                this.classList.add('active');
                
                // 加载对应学期的课程
                const semester = parseInt(this.getAttribute('data-semester'));
                loadSemesterCourses(semester);
            });
        });
    }
    
    // 加载学期课程
    function loadSemesterCourses(semester) {
        // 在实际应用中，这里应该是一个AJAX请求
        // 为了演示，我们使用模拟数据
        let courses;
        
        if (semester === 1) {
            courses = [
                {
                    courseCode: 'CS101',
                    courseName: '计算机导论',
                    credits: 3.0,
                    courseType: '必修',
                    department: '计算机科学与工程学院',
                    hours: 48,
                    description: '本课程介绍计算机科学的基本概念、历史发展、应用领域以及未来趋势。',
                    status: 'completed',
                    prerequisites: []
                },
                {
                    courseCode: 'MATH101',
                    courseName: '高等数学(上)',
                    credits: 5.0,
                    courseType: '必修',
                    department: '数学学院',
                    hours: 80,
                    description: '本课程介绍微积分的基本概念和方法，包括极限、导数、积分及其应用。',
                    status: 'completed',
                    prerequisites: []
                },
                {
                    courseCode: 'PHY101',
                    courseName: '大学物理(上)',
                    credits: 4.0,
                    courseType: '必修',
                    department: '物理学院',
                    hours: 64,
                    description: '本课程介绍力学、热学的基本概念和原理，培养学生的物理思维和解决问题的能力。',
                    status: 'completed',
                    prerequisites: []
                },
                {
                    courseCode: 'ENG101',
                    courseName: '大学英语(一)',
                    credits: 3.0,
                    courseType: '必修',
                    department: '外国语学院',
                    hours: 48,
                    description: '本课程培养学生的英语听、说、读、写能力，为专业学习和未来工作打下语言基础。',
                    status: 'completed',
                    prerequisites: []
                }
            ];
        } else if (semester === 2) {
            courses = [
                {
                    courseCode: 'CS102',
                    courseName: 'C语言程序设计',
                    credits: 4.0,
                    courseType: '必修',
                    department: '计算机科学与工程学院',
                    hours: 64,
                    description: '本课程介绍C语言的基本语法、数据结构和算法，培养学生的程序设计能力。',
                    status: 'completed',
                    prerequisites: ['CS101']
                },
                {
                    courseCode: 'MATH102',
                    courseName: '高等数学(下)',
                    credits: 5.0,
                    courseType: '必修',
                    department: '数学学院',
                    hours: 80,
                    description: '本课程是高等数学(上)的后续课程，介绍多元微积分、级数、微分方程等内容。',
                    status: 'completed',
                    prerequisites: ['MATH101']
                },
                {
                    courseCode: 'PHY102',
                    courseName: '大学物理(下)',
                    credits: 4.0,
                    courseType: '必修',
                    department: '物理学院',
                    hours: 64,
                    description: '本课程介绍电磁学、光学、量子物理的基本概念和原理。',
                    status: 'completed',
                    prerequisites: ['PHY101']
                },
                {
                    courseCode: 'ENG102',
                    courseName: '大学英语(二)',
                    credits: 3.0,
                    courseType: '必修',
                    department: '外国语学院',
                    hours: 48,
                    description: '本课程是大学英语(一)的后续课程，进一步提高学生的英语综合能力。',
                    status: 'completed',
                    prerequisites: ['ENG101']
                }
            ];
        } else {
            courses = [
                {
                    courseCode: `CS${200 + semester}`,
                    courseName: `示例课程 ${semester}`,
                    credits: 3.0,
                    courseType: '必修',
                    department: '计算机科学与工程学院',
                    hours: 48,
                    description: '这是一个示例课程，用于演示培养计划页面。',
                    status: semester <= 4 ? 'completed' : (semester <= 6 ? 'in-progress' : 'planned'),
                    prerequisites: []
                }
            ];
        }
        
        displaySemesterCourses(semester, courses);
    }
    
    // 显示学期课程
    function displaySemesterCourses(semester, courses) {
        const semesterContents = document.getElementById('semester-contents');
        
        // 清空现有内容
        semesterContents.innerHTML = '';
        
        // 创建学期内容容器
        const semesterContent = document.createElement('div');
        semesterContent.className = 'semester-content active';
        semesterContent.setAttribute('data-semester', semester);
        
        // 添加课程卡片
        courses.forEach(course => {
            const courseCard = document.createElement('div');
            courseCard.className = 'course-card';
            
            let statusClass = '';
            let statusText = '';
            
            switch (course.status) {
                case 'completed':
                    statusClass = 'status-completed';
                    statusText = '已修完';
                    break;
                case 'in-progress':
                    statusClass = 'status-in-progress';
                    statusText = '进行中';
                    break;
                case 'planned':
                    statusClass = 'status-planned';
                    statusText = '计划修读';
                    break;
            }
            
            let courseTypeClass = '';
            
            switch (course.courseType) {
                case '必修':
                    courseTypeClass = 'status-required';
                    break;
                case '专业选修':
                    courseTypeClass = 'status-elective';
                    break;
                case '通识选修':
                    courseTypeClass = 'status-general';
                    break;
            }
            
            let prerequisitesHtml = '';
            
            if (course.prerequisites.length > 0) {
                prerequisitesHtml = `
                    <div class="prerequisite-list">
                        <div class="detail-label">先修课程：</div>
                        ${course.prerequisites.map(prereq => `<span class="prerequisite-item">${prereq}</span>`).join(', ')}
                    </div>
                `;
            }
            
            courseCard.innerHTML = `
                <div class="course-header">
                    <div class="course-title">${course.courseName}</div>
                    <div class="course-code">${course.courseCode}</div>
                </div>
                <div class="course-details">
                    <div class="course-detail">
                        <div class="detail-label">学分：</div>
                        <div>${course.credits}</div>
                    </div>
                    <div class="course-detail">
                        <div class="detail-label">课程类型：</div>
                        <div class="course-status ${courseTypeClass}">${course.courseType}</div>
                    </div>
                    <div class="course-detail">
                        <div class="detail-label">学时：</div>
                        <div>${course.hours}</div>
                    </div>
                    <div class="course-detail">
                        <div class="detail-label">开课院系：</div>
                        <div>${course.department}</div>
                    </div>
                    <div class="course-detail">
                        <div class="detail-label">状态：</div>
                        <div class="course-status ${statusClass}">${statusText}</div>
                    </div>
                </div>
                ${prerequisitesHtml}
                <div class="course-description">${course.description}</div>
            `;
            
            semesterContent.appendChild(courseCard);
        });
        
        semesterContents.appendChild(semesterContent);
    }
</script>
{% endblock %} 